!function(i,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("InquiryMonad",[],n):"object"==typeof exports?exports.InquiryMonad=n():i.InquiryMonad=n()}(window,function(){return function(i){var n={};function a(o){if(n[o])return n[o].exports;var s=n[o]={i:o,l:!1,exports:{}};return i[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=i,a.c=n,a.d=function(i,n,o){a.o(i,n)||Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:o})},a.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},a.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(n,"a",n),n},a.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},a.p="",a(a.s=1)}([function(i,n){const a=i=>({isJust:!0,isNothing:!1,inspect:n=>`Just(${i})`,map:n=>s.of(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:n=>i,fork:(n,a)=>a(i),sequence:n=>i.map(s.of)}),o=i=>({isJust:!1,isNothing:!0,inspect:i=>"Nothing",map:i=>o(),ap:i=>o(),chain:i=>o(),join:i=>o(),fork:(i,n)=>i(),sequence:i=>i(o())}),s={of:i=>null===i||void 0===i?o():a(i)};i.exports={Maybe:s,Nothing:o,Just:a}},function(i,n,a){"use strict";var o=this&&this.__awaiter||function(i,n,a,o){return new(a||(a=Promise))(function(s,t){function e(i){try{u(o.next(i))}catch(i){t(i)}}function r(i){try{u(o.throw(i))}catch(i){t(i)}}function u(i){i.done?s(i.value):new a(function(n){n(i.value)}).then(e,r)}u((o=o.apply(i,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const s=a(0),t=i=>({map:n=>t(n(i)),chain:n=>n(i),ap:n=>n.map(i),inspect:()=>`IOU(${i})`,join:()=>i,concat:n=>n.chain(n=>t(i.concat(n))),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isInquiry:!1,isPass:!1,isFail:!1,isIOU:!0});n.IOU=t;const e=i=>({map:n=>e(n(i)),chain:n=>n(i),fold:(n,a)=>n(i),fork:(n,a)=>a(i),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],join:()=>i,inspect:()=>`Pass(${i})`,concat:n=>n.fold(n=>e(i.concat(n)),null),ap:n=>n.isPass?n.concat(e(i)):e(i),answer:(n,a="(anonymous)",o=c)=>(n.informant([a,e(i)]),o({subject:n.subject,fail:n.fail,iou:n.iou,pass:n.pass.concat(e(i)),informant:n.informant})),isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isPass:!0,isFail:!1,isIOU:!1,isInquiry:!1});n.Pass=e;const r=i=>({map:n=>r(n(i)),chain:n=>n(i),fold:(n,a)=>a(i),fork:(n,a)=>n(i),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],join:()=>i,inspect:()=>`Fail(${i})`,concat:n=>n.fork(n=>r(i.concat(n)),null),ap:n=>n.isPass?r(i):n.concat(r(i)),answer:(n,a="(anonymous)",o=c)=>(n.informant([a,r(i)]),o({subject:n.subject,fail:n.fail.concat(r(i)),pass:n.pass,iou:n.iou,informant:n.informant})),isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isPass:!1,isFail:!0,isIOU:!1,isInquiry:!1});n.Fail=r;const u=i=>i.isInquiry?i:c({subject:s.Maybe.of(i),fail:r([]),pass:e([]),iou:t([]),informant:i=>i}),c=i=>({inquire:n=>{const a=n(i.subject.join());return a.isFail||a.isPass||a.isInquiry?a.answer(i,n.name,c):e(a)},informant:n=>c({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:n}),inspect:()=>`Inquiry(${i.fail.inspect()} ${i.pass.inspect()} ${i.iou.inspect()}`,swap:()=>c({subject:i.subject,iou:i.iou,fail:r(i.pass.join()),pass:e(i.fail.join()),informant:i.informant}),unison:n=>c({subject:i.subject,iou:i.iou,fail:r(n(i.fail.join())),pass:e(n(i.pass.join())),informant:i.informant}),map:n=>u(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:()=>i,breakpoint:n=>i.fail.join().length?n(i):c(i),milestone:n=>i.pass.join().length?n(i):c(i),answer:(n,a,o)=>(n.informant([a,c(i)]),c({subject:n.subject,iou:n.iou,fail:n.fail.concat(i.fail),pass:n.pass.concat(i.pass),informant:n.informant})),conclude:(n,a)=>({subject:i.subject,iou:i.iou,fail:n(i.fail),pass:a(i.pass),informant:i.informant}),cleared:n=>i.fail.isEmpty()?n(i.pass):c(i),faulted:n=>i.fail.isEmpty()?c(i):n(i.fail),fork:(n,a)=>i.fail.join().length?n(i.fail):a(i.pass),zip:n=>n(i.fail.join().concat(i.pass.join())),isInquiry:!0}),f={subject:u,of:i=>c(i)};n.Inquiry=f;const l=i=>i.isInquiry?i:m({subject:s.Maybe.of(i),fail:r([]),pass:e([]),iou:t([]),informant:i=>i}),p=i=>m(i),j=i=>n=>n.reduce((n,a)=>a.answer(i,"reduced",m),i),m=i=>({inquire:n=>{const a=n(i.subject.join());return a.then?m({subject:i.subject,fail:i.fail,pass:i.pass,iou:i.iou.concat(t([a])),informant:i.informant}):(a=>a.isFail||a.isPass||a.isInquiry?a.answer(i,n.name,m):e(a))(a)},informant:n=>m({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:n}),inspect:()=>`InquiryP(${i.fail.inspect()} ${i.pass.inspect()} ${i.iou.inspect()}`,swap:()=>m({subject:i.subject,iou:i.iou,fail:r(i.pass.join()),pass:e(i.fail.join()),informant:i.informant}),unison:n=>m({subject:i.subject,iou:i.iou,fail:r(n(i.fail.join())),pass:e(n(i.pass.join())),informant:i.informant}),map:n=>l(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:()=>i,breakpoint:n=>i.fail.join().length?n(i):m(i),milestone:n=>i.pass.join().length?n(i):m(i),answer:(n,a,o)=>(n.informant([a,m(i)]),m({subject:n.subject,iou:n.iou,fail:n.fail.concat(i.fail),pass:n.pass.concat(i.pass),informant:n.informant})),conclude:(n,a)=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>({subject:i.subject,iou:i.iou,fail:n(i.fail),pass:a(i.pass),informant:i.informant}))}),cleared:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.fail.isEmpty()?n(i.pass):m(i)).catch(i=>console.error("err",i))}),faulted:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.fail.isEmpty()?m(i):n(i.fail))}),fork:(n,a)=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.fail.join().length?n(i.fail):a(i.pass))}),zip:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>n(i.fail.join().concat(i.pass.join())))}),await:()=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>p(i))}),isInquiry:!0}),h={subject:l,of:p};n.InquiryP=h}])});
//# sourceMappingURL=inquiry-monad.min.js.map