!function(i,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("InquiryMonad",[],n):"object"==typeof exports?exports.InquiryMonad=n():i.InquiryMonad=n()}(window,function(){return function(i){var n={};function s(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return i[o].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=i,s.c=n,s.d=function(i,n,o){s.o(i,n)||Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:o})},s.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},s.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(n,"a",n),n},s.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},s.p="",s(s.s=1)}([function(i,n){const s=i=>({isJust:!0,isNothing:!1,inspect:n=>`Just(${i})`,map:n=>a.of(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:n=>i,fork:(n,s)=>s(i),sequence:n=>i.map(a.of)}),o=i=>({isJust:!1,isNothing:!0,inspect:i=>"Nothing",map:i=>o(),ap:i=>o(),chain:i=>o(),join:i=>o(),fork:(i,n)=>i(),sequence:i=>i(o())}),a={of:i=>null===i||void 0===i?o():s(i)};i.exports={Maybe:a,Nothing:o,Just:s}},function(i,n,s){"use strict";var o=this&&this.__awaiter||function(i,n,s,o){return new(s||(s=Promise))(function(a,t){function e(i){try{u(o.next(i))}catch(i){t(i)}}function r(i){try{u(o.throw(i))}catch(i){t(i)}}function u(i){i.done?a(i.value):new s(function(n){n(i.value)}).then(e,r)}u((o=o.apply(i,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const a=s(0),t=i=>({map:n=>t(n(i)),chain:n=>n(i),ap:n=>n.map(i),inspect:()=>`IOU(${i})`,join:()=>i,concat:n=>n.chain(n=>t(i.concat(n))),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isInquiry:!1,isPass:!1,isFail:!1,isIOU:!0});n.IOU=t;const e=i=>({map:n=>e(n(i)),chain:n=>n(i),fold:(n,s)=>n(i),fork:(n,s)=>s(i),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],join:()=>i,inspect:()=>`Pass(${i})`,concat:n=>n.fold(n=>e(i.concat(n)),null),ap:n=>n.isPass?n.concat(e(i)):e(i),answer:(n,s="(anonymous)",o=c)=>(n.informant([s,e(i)]),o({subject:n.subject,fail:n.fail,iou:n.iou,pass:n.pass.concat(e(i)),informant:n.informant})),isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isPass:!0,isFail:!1,isIOU:!1,isInquiry:!1});n.Pass=e;const r=i=>({map:n=>r(n(i)),chain:n=>n(i),fold:(n,s)=>s(i),fork:(n,s)=>n(i),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],join:()=>i,inspect:()=>`Fail(${i})`,concat:n=>n.fork(n=>r(i.concat(n)),null),ap:n=>n.isPass?r(i):n.concat(r(i)),answer:(n,s="(anonymous)",o=c)=>(n.informant([s,r(i)]),o({subject:n.subject,fail:n.fail.concat(r(i)),pass:n.pass,iou:n.iou,informant:n.informant})),isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isPass:!1,isFail:!0,isIOU:!1,isInquiry:!1});n.Fail=r;const u=i=>i.isInquiry?i:c({subject:a.Maybe.of(i),fail:r([]),pass:e([]),iou:t([]),informant:i=>i}),c=i=>({inquire:n=>{const s=n(i.subject.join());return s.isFail||s.isPass||s.isInquiry?s.answer(i,n.name,c):e(s)},inquireMap:(n,s)=>s.reduce((i,s)=>{const o=n(s)(i.join().subject.join());return o.isFail||o.isPass||o.isInquiry?o.answer(i.join(),n.name,c):e(o)},c({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:i.informant})),informant:n=>c({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:n}),inspect:()=>`Inquiry(${i.fail.inspect()} ${i.pass.inspect()} ${i.iou.inspect()}`,swap:()=>c({subject:i.subject,iou:i.iou,fail:r(i.pass.join()),pass:e(i.fail.join()),informant:i.informant}),unison:n=>c({subject:i.subject,iou:i.iou,fail:r(n(i.fail.join())),pass:e(n(i.pass.join())),informant:i.informant}),map:n=>u(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:()=>i,breakpoint:n=>i.fail.join().length?n(i):c(i),milestone:n=>i.pass.join().length?n(i):c(i),answer:(n,s,o)=>(n.informant([s,c(i)]),c({subject:n.subject,iou:n.iou,fail:n.fail.concat(i.fail),pass:n.pass.concat(i.pass),informant:n.informant})),conclude:(n,s)=>({subject:i.subject,iou:i.iou,fail:n(i.fail),pass:s(i.pass),informant:i.informant}),cleared:n=>i.fail.isEmpty()?n(i.pass):c(i),faulted:n=>i.fail.isEmpty()?c(i):n(i.fail),suffice:n=>i.pass.isEmpty()?c(i):n(i.pass),scratch:n=>i.pass.isEmpty()?n(i.fail):c(i),fork:(n,s)=>i.fail.join().length?n(i.fail):s(i.pass),zip:n=>n(i.fail.join().concat(i.pass.join())),isInquiry:!0}),f={subject:u,of:i=>"subject"in i&&"fail"in i&&"pass"in i&&"iou"in i&&"informant"in i?c(i):(i=>(console.warn("Inquiry.of requires properties: subject, fail, pass, iou, informant. Converting to Inquiry.subject()."),u(i)))(i)};n.Inquiry=f;const l=i=>i.isInquiry?i:m({subject:a.Maybe.of(i),fail:r([]),pass:e([]),iou:t([]),informant:i=>i}),p=i=>"subject"in i&&"fail"in i&&"pass"in i&&"iou"in i&&"informant"in i?m(i):(i=>(console.warn("InquiryP.of requires properties: subject, fail, pass, iou, informant. Converting to InquiryP.subject()."),l(i)))(i),j=i=>n=>n.reduce((n,s)=>s.answer(i,"(async fn)",m),i),m=i=>({inquire:n=>{const s=n(i.subject.join());return s.then?m({subject:i.subject,fail:i.fail,pass:i.pass,iou:i.iou.concat(t([s])),informant:i.informant}):(s=>s.isFail||s.isPass||s.isInquiry?s.answer(i,n.name,m):e(s))(s)},inquireMap:(n,s)=>s.reduce((i,s)=>{const o=n(s)(i.join().subject.join());return o.then?m({subject:i.join().subject,fail:i.join().fail,pass:i.join().pass,iou:i.join().iou.concat(t([o])),informant:i.join().informant}):(s=>s.isFail||s.isPass||s.isInquiry?s.answer(i.join(),n.name,m):e(s))(o)},m({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:i.informant})),informant:n=>m({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:n}),inspect:()=>`InquiryP(${i.fail.inspect()} ${i.pass.inspect()} ${i.iou.inspect()}`,swap:()=>m({subject:i.subject,iou:i.iou,fail:r(i.pass.join()),pass:e(i.fail.join()),informant:i.informant}),unison:n=>m({subject:i.subject,iou:i.iou,fail:r(n(i.fail.join())),pass:e(n(i.pass.join())),informant:i.informant}),map:n=>l(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:()=>i,breakpoint:n=>i.fail.join().length?n(i):m(i),milestone:n=>i.pass.join().length?n(i):m(i),answer:(n,s,o)=>(n.informant([s,m(i)]),m({subject:n.subject,iou:n.iou,fail:n.fail.concat(i.fail),pass:n.pass.concat(i.pass),informant:n.informant})),conclude:(n,s)=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>({subject:i.subject,iou:i.iou,fail:n(i.fail),pass:s(i.pass),informant:i.informant}))}),cleared:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.fail.isEmpty()?n(i.pass):m(i)).catch(i=>console.error("err",i))}),faulted:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.fail.isEmpty()?m(i):n(i.fail))}),suffice:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.pass.isEmpty()?m(i):n(i.pass)).catch(i=>console.error("err",i))}),scratch:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.pass.isEmpty()?n(i.fail):m(i))}),fork:(n,s)=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>i.fail.join().length?n(i.fail):s(i.pass))}),zip:n=>o(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>n(i.fail.join().concat(i.pass.join())))}),await:(n=1/0)=>o(this,void 0,void 0,function*(){const s=new Promise((i,s)=>setTimeout(i,n,[r("Promise(s) have timed out")])),o=Promise.all(i.iou.join());return Promise.race([s,o]).then(j(i)).then(i=>i.isInquiry?i.join():i).then(i=>p(i))}),isInquiry:!0}),h={subject:l,of:p};n.InquiryP=h}])});
//# sourceMappingURL=inquiry-monad.min.js.map