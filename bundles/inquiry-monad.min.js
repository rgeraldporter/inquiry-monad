!function(n,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("InquiryMonad",[],i):"object"==typeof exports?exports.InquiryMonad=i():n.InquiryMonad=i()}(window,function(){return function(n){var i={};function e(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=n,e.c=i,e.d=function(n,i,t){e.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:t})},e.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},e.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(i,"a",i),i},e.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},e.p="",e(e.s=2)}([function(n,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.$$inquirySymbol=Symbol(),i.$$questionsetSymbol=Symbol(),i.$$questionSymbol=Symbol(),i.$$passSymbol=Symbol(),i.$$failSymbol=Symbol(),i.$$iouSymbol=Symbol(),i.$$receiptSymbol=Symbol()},function(n,i){const e=n=>({isJust:!0,isNothing:!1,inspect:i=>`Just(${n})`,map:i=>o.of(i(n)),ap:i=>i.map(n),chain:i=>i(n),join:i=>n,fork:(i,e)=>e(n),sequence:i=>n.map(o.of)}),t=n=>({isJust:!1,isNothing:!0,inspect:n=>"Nothing",map:n=>t(),ap:n=>t(),chain:n=>t(),join:n=>t(),fork:(n,i)=>n(),sequence:n=>n(t())}),o={of:n=>null===n||void 0===n?t():e(n)};n.exports={Maybe:o,Nothing:t,Just:e}},function(n,i,e){"use strict";var t=this&&this.__awaiter||function(n,i,e,t){return new(e||(e=Promise))(function(o,s){function a(n){try{u(t.next(n))}catch(n){s(n)}}function r(n){try{u(t.throw(n))}catch(n){s(n)}}function u(n){n.done?o(n.value):new e(function(i){i(n.value)}).then(a,r)}u((t=t.apply(n,i||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e(1),s=e(0);i.$$inquirySymbol=s.$$inquirySymbol,i.$$questionSymbol=s.$$questionSymbol,i.$$passSymbol=s.$$passSymbol,i.$$failSymbol=s.$$failSymbol;const a=()=>{},r=Symbol("Not found"),u=n=>new Promise(i=>{const e=[];let t=0;n.forEach((o,s)=>{o.catch(n=>n).then(o=>{e[s]=o,(t+=1)===n.length&&i(e)})})}),c=n=>({map:i=>c(i(n)),chain:i=>i(n),ap:i=>i.map(n),inspect:()=>`IOU(${n})`,join:()=>n,concat:i=>i.chain(i=>c(n.concat(i))),head:()=>Array.isArray(n)&&n.length?n[0]:[],tail:()=>Array.isArray(n)&&n.length?n[n.length-1]:[],isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),[s.$$inquirySymbol]:!1,[s.$$passSymbol]:!1,[s.$$failSymbol]:!1,[s.$$iouSymbol]:!0});i.IOU=c;const l=n=>({map:i=>l(i(n)),chain:i=>i(n),fold:(i,e)=>i(n),fork:(i,e)=>e(n),head:()=>Array.isArray(n)&&n.length?n[0]:[],tail:()=>Array.isArray(n)&&n.length?n[n.length-1]:[],join:()=>n,inspect:()=>`Pass(${n})`,concat:i=>i.fold(i=>l(n.concat(i)),a),ap:i=>i[s.$$passSymbol]?i.concat(l(n)):l(n),answer:(i,e="(anonymous)",t=q)=>(i.informant([e,l(n)]),t({subject:i.subject,fail:i.fail,iou:i.iou,pass:i.pass.concat(l(n)),informant:i.informant,questionset:i.questionset,receipt:i.receipt.concat(f([[e,l(n)]]))})),isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),[s.$$passSymbol]:!0,[s.$$failSymbol]:!1,[s.$$iouSymbol]:!1,[s.$$inquirySymbol]:!1});i.Pass=l;const p=n=>({map:i=>p(i(n)),chain:i=>i(n),fold:(i,e)=>e(n),fork:(i,e)=>i(n),head:()=>Array.isArray(n)&&n.length?n[0]:[],tail:()=>Array.isArray(n)&&n.length?n[n.length-1]:[],join:()=>n,inspect:()=>`Fail(${n})`,concat:i=>i.fork(i=>p(n.concat(i)),a),ap:i=>i[s.$$passSymbol]?p(n):i.concat(p(n)),answer:(i,e="(anonymous)",t=q)=>(i.informant([e,p(n)]),t({subject:i.subject,fail:i.fail.concat(p(n)),pass:i.pass,iou:i.iou,informant:i.informant,questionset:i.questionset,receipt:i.receipt.concat(f([[e,p(n)]]))})),isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),[s.$$passSymbol]:!1,[s.$$failSymbol]:!0,[s.$$iouSymbol]:!1,[s.$$inquirySymbol]:!1});i.Fail=p;const f=n=>({map:i=>f(i(n)),chain:i=>i(n),fold:(i,e)=>e(n),fork:(i,e)=>i(n),head:()=>n[0],tail:()=>n[n.length-1],join:()=>n,inspect:()=>`Receipt(${n})`,isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),concat:i=>i.chain(i=>f(n.concat(i))),ap:i=>i.map(n),[s.$$inquirySymbol]:!1,[s.$$receiptSymbol]:!0});i.Receipt=f;const m=n=>({map:i=>m(i(n)),chain:i=>i(n),ap:i=>i.map(n),inspect:()=>`Question(${n})`,join:()=>n,call:i=>n[1](i.join().subject.join()),extract:()=>n[1],name:()=>n[0],[s.$$questionSymbol]:!0}),y=n=>Array.isArray(n)?m(n):(n=>console.error("Question must be passed parameters that adhere to the documented type. Value that was passed:",n))(n),$={of:y};i.Question=$;const b=n=>({map:i=>b(i(n)),chain:i=>i(n),ap:i=>i.map(n),inspect:()=>`Questionset(${n})`,join:()=>n,concat:i=>i.chain(i=>b(n.concat(i))),find:i=>o.Maybe.of(n.find(n=>RegExp(n[0]).test(i))).map(n=>n[1]).fork(()=>(console.warn("Question was not found: ",i),r),n=>n),[s.$$questionsetSymbol]:!0}),j={of:n=>Array.isArray(n)?b(n):(n=>console.error("Questionset must be passed parameters that adhere to the documented type. Value that was passed:",n))(n)};i.Questionset=j;const h=n=>n[s.$$inquirySymbol]?n:q({subject:o.Maybe.of(n),fail:p([]),pass:l([]),iou:c([]),informant:n=>n,questionset:b([["",a]]),receipt:f([])}),q=n=>({inquire:i=>{const e="function"==typeof i?i.name||"anon":(n=>n[s.$$questionSymbol]?n.name():n)(i),t=i[s.$$questionSymbol]?i.extract():i,o="function"==typeof t?t:n.questionset.find(t),a="function"==typeof o?o(n.subject.join()):{};return a[s.$$failSymbol]||a[s.$$passSymbol]||a[s.$$inquirySymbol]?a.answer(n,e,q):(i=>(console.warn("inquire was passed a function that does not return Pass or Fail:",e),console.warn("response was:",i),q(n)))([a,e])},inquireMap:(i,e)=>e.reduce((e,t)=>{const o="function"==typeof i?i.name||"anon":(n=>n[s.$$questionSymbol]?n.name():n)(i),a=i[s.$$questionSymbol]?i.extract():i,r="function"==typeof a?a:n.questionset.find(a),u="function"==typeof r?r(t)(e.join().subject.join()):{};return u[s.$$failSymbol]||u[s.$$passSymbol]||u[s.$$inquirySymbol]?u.answer(e.join(),o,q):(n=>(console.warn("inquire was passed a function that does not return Pass or Fail:",o),console.warn("response was:",n),e))([u,o])},q({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:n.questionset,receipt:n.receipt})),inquireAll:()=>n.questionset.chain(i=>i.reduce((n,i)=>n.inquire(y(i)),q(n))),using:i=>q({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:i,receipt:n.receipt}),informant:i=>q({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:i,questionset:n.questionset,receipt:n.receipt}),inspect:()=>`Inquiry(${n.fail.inspect()} ${n.pass.inspect()} ${n.iou.inspect()}`,swap:()=>q({subject:n.subject,iou:n.iou,fail:p(n.pass.join()),pass:l(n.fail.join()),informant:n.informant,questionset:n.questionset,receipt:n.receipt}),unison:i=>q({subject:n.subject,iou:n.iou,fail:p(i(n.fail.join())),pass:l(i(n.pass.join())),informant:n.informant,questionset:n.questionset,receipt:n.receipt}),map:i=>h(i(n)),ap:i=>i.map(n),chain:i=>i(n),join:()=>n,breakpoint:i=>n.fail.join().length?q(i(n)):q(n),milestone:i=>n.pass.join().length?q(i(n)):q(n),answer:(i,e,t)=>(i.informant([e,q(n)]),q({subject:i.subject,iou:i.iou,fail:i.fail.concat(n.fail),pass:i.pass.concat(n.pass),informant:i.informant,questionset:i.questionset,receipt:i.receipt})),conclude:(i,e)=>({subject:n.subject,iou:n.iou,fail:i(n.fail),pass:e(n.pass),informant:n.informant,questionset:n.questionset,receipt:n.receipt}),cleared:i=>n.fail.isEmpty()?i(n.pass):void 0,faulted:i=>n.fail.isEmpty()?void 0:i(n.fail),suffice:i=>n.pass.isEmpty()?void 0:i(n.pass),scratch:i=>n.pass.isEmpty()?i(n.fail):void 0,fork:(i,e)=>n.fail.join().length?i(n.fail):e(n.pass),fold:(i,e)=>n.pass.join().length?i(n.pass):e(n.fail),zip:i=>i(n.fail.join().concat(n.pass.join())),[s.$$inquirySymbol]:!0}),d={subject:h,of:n=>"subject"in n&&"fail"in n&&"pass"in n&&"iou"in n&&"informant"in n&&"questionset"in n&&"receipt"in n?q(n):(n=>(console.warn("Inquiry.of requires properties: subject, fail, pass, iou, informant, questionset, receipt. Converting to Inquiry.subject()."),h(n)))(n)};i.Inquiry=d;const S=n=>n[s.$$inquirySymbol]?n:A({subject:o.Maybe.of(n),fail:p([]),pass:l([]),iou:c([]),informant:n=>n,questionset:b([["",a]]),receipt:f([])}),w=n=>"subject"in n&&"fail"in n&&"pass"in n&&"iou"in n&&"informant"in n&&"questionset"in n&&"receipt"in n?A(n):(n=>(console.warn("InquiryP.of requires properties: subject, fail, pass, iou, informant, questionset, receipt. Converting to InquiryP.subject()."),S(n)))(n),v=n=>i=>i?i.reduce((n,i)=>i?i[1].answer(n,i[0],A).join():n,n):n,g=n=>n.iou.join().length?n.iou.join().map(n=>n.extract()().catch(n=>n).then(i=>Promise.resolve([n.name(),i]))):[Promise.resolve()],A=n=>({inquire:i=>{const e="function"==typeof i?i.name||"anon":(n=>n[s.$$questionSymbol]?n.name():n)(i),t=i[s.$$questionSymbol]?i.extract():i,o="function"==typeof t?t:n.questionset.find(t),a="function"==typeof o?o(n.subject.join()):{},r=!!a.then&&y([e,()=>a]);return r?A({subject:n.subject,fail:n.fail,pass:n.pass,iou:n.iou.concat(c([r])),informant:n.informant,questionset:n.questionset,receipt:n.receipt}):(i=>i[s.$$failSymbol]||i[s.$$passSymbol]||i[s.$$inquirySymbol]?i.answer(n,e,A):(i=>(console.warn("inquire was passed a function that does not return Pass or Fail:",e),console.warn("response was:",i),A(n)))([a,e]))(a)},inquireMap:(i,e)=>e.reduce((e,t)=>{const o="function"==typeof i?i.name||"anon":(n=>n[s.$$questionSymbol]?n.name():n)(i),a=i[s.$$questionSymbol]?i.extract():i,r="function"==typeof a?a:n.questionset.find(a),u="function"==typeof r?r(t)(e.join().subject.join()):{};return u.then?A({subject:e.join().subject,fail:e.join().fail,pass:e.join().pass,iou:e.join().iou.concat(c([u])),informant:e.join().informant,questionset:e.join().questionset,receipt:e.join().receipt}):(n=>n[s.$$failSymbol]||n[s.$$passSymbol]||n[s.$$inquirySymbol]?n.answer(e.join(),o,A):(n=>(console.warn("inquire was passed a function that does not return Pass or Fail:",o),console.warn("response was:",n),e))(n))(u)},A({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:n.questionset,receipt:n.receipt})),inquireAll:()=>n.questionset.chain(i=>i.reduce((n,i)=>n.inquire(y(i)),A(n))),using:i=>A({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:i,receipt:n.receipt}),informant:i=>A({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:i,questionset:n.questionset,receipt:n.receipt}),inspect:()=>`InquiryP(${n.fail.inspect()} ${n.pass.inspect()} ${n.iou.inspect()}`,swap:()=>A({subject:n.subject,iou:n.iou,fail:p(n.pass.join()),pass:l(n.fail.join()),informant:n.informant,questionset:n.questionset,receipt:n.receipt}),unison:i=>A({subject:n.subject,iou:n.iou,fail:p(i(n.fail.join())),pass:l(i(n.pass.join())),informant:n.informant,questionset:n.questionset,receipt:n.receipt}),map:i=>S(i(n)),ap:i=>i.map(n),chain:i=>i(n),join:()=>n,breakpoint:i=>n.fail.join().length?A(i(n)):A(n),milestone:i=>n.pass.join().length?A(i(n)):A(n),answer:(i,e,t)=>(i.informant([e,A(n)]),A({subject:i.subject,iou:i.iou,fail:i.fail.concat(n.fail),pass:i.pass.concat(n.pass),informant:i.informant,questionset:i.questionset,receipt:i.receipt})),conclude:(i,e)=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>({subject:n.subject,iou:n.iou,fail:i(n.fail),pass:e(n.pass),informant:n.informant,questionset:n.questionset,receipt:n.receipt}))}),cleared:i=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>n.fail.isEmpty()?i(n.pass):void 0).catch(n=>console.error("err",n))}),faulted:i=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>n.fail.isEmpty()?void 0:i(n.fail))}),suffice:i=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>n.pass.isEmpty()?void 0:i(n.pass)).catch(n=>console.error("err",n))}),scratch:i=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>n.pass.isEmpty()?i(n.fail):void 0)}),fork:(i,e)=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>n.fail.join().length?i(n.fail):e(n.pass))}),fold:(i,e)=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>n.pass.join().length?i(n.pass):e(n.fail))}),zip:i=>t(this,void 0,void 0,function*(){return u(g(n)).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>i(n.fail.join().concat(n.pass.join())))}),await:(i=1/0)=>t(this,void 0,void 0,function*(){const e=new Promise((n,e)=>setTimeout(n,i,["timeout",p("Promise(s) have timed out")])),t=u(g(n));return Promise.race([e,t]).then(v(n)).then(n=>n[s.$$inquirySymbol]?n.join():n).then(n=>w(n))}),[s.$$inquirySymbol]:!0}),P={subject:S,of:w};i.InquiryP=P}])});
//# sourceMappingURL=inquiry-monad.min.js.map