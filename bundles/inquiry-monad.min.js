!function(i,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("InquiryMonad",[],n):"object"==typeof exports?exports.InquiryMonad=n():i.InquiryMonad=n()}(window,function(){return function(i){var n={};function o(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return i[s].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=i,o.c=n,o.d=function(i,n,s){o.o(i,n)||Object.defineProperty(i,n,{configurable:!1,enumerable:!0,get:s})},o.r=function(i){Object.defineProperty(i,"__esModule",{value:!0})},o.n=function(i){var n=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(n,"a",n),n},o.o=function(i,n){return Object.prototype.hasOwnProperty.call(i,n)},o.p="",o(o.s=1)}([function(i,n){const o=i=>({isJust:!0,isNothing:!1,inspect:n=>`Just(${i})`,map:n=>a.of(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:n=>i,fork:(n,o)=>o(i),sequence:n=>i.map(a.of)}),s=i=>({isJust:!1,isNothing:!0,inspect:i=>"Nothing",map:i=>s(),ap:i=>s(),chain:i=>s(),join:i=>s(),fork:(i,n)=>i(),sequence:i=>i(s())}),a={of:i=>null===i||void 0===i?s():o(i)};i.exports={Maybe:a,Nothing:s,Just:o}},function(i,n,o){"use strict";var s=this&&this.__awaiter||function(i,n,o,s){return new(o||(o=Promise))(function(a,t){function e(i){try{u(s.next(i))}catch(i){t(i)}}function r(i){try{u(s.throw(i))}catch(i){t(i)}}function u(i){i.done?a(i.value):new o(function(n){n(i.value)}).then(e,r)}u((s=s.apply(i,n||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0});const a=o(0),t=Symbol();n.$$inquirySymbol=t;const e=i=>({map:n=>e(n(i)),chain:n=>n(i),ap:n=>n.map(i),inspect:()=>`IOU(${i})`,join:()=>i,concat:n=>n.chain(n=>e(i.concat(n))),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),[t]:!1,isPass:!1,isFail:!1,isIOU:!0});n.IOU=e;const r=i=>({map:n=>r(n(i)),chain:n=>n(i),fold:(n,o)=>n(i),fork:(n,o)=>o(i),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],join:()=>i,inspect:()=>`Pass(${i})`,concat:n=>n.fold(n=>r(i.concat(n)),null),ap:n=>n.isPass?n.concat(r(i)):r(i),answer:(n,o="(anonymous)",s=f)=>(n.informant([o,r(i)]),s({subject:n.subject,fail:n.fail,iou:n.iou,pass:n.pass.concat(r(i)),informant:n.informant})),isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isPass:!0,isFail:!1,isIOU:!1,[t]:!1});n.Pass=r;const u=i=>({map:n=>u(n(i)),chain:n=>n(i),fold:(n,o)=>o(i),fork:(n,o)=>n(i),head:()=>Array.isArray(i)&&i.length?i[0]:[],tail:()=>Array.isArray(i)&&i.length?i[i.length-1]:[],join:()=>i,inspect:()=>`Fail(${i})`,concat:n=>n.fork(n=>u(i.concat(n)),null),ap:n=>n.isPass?u(i):n.concat(u(i)),answer:(n,o="(anonymous)",s=f)=>(n.informant([o,u(i)]),s({subject:n.subject,fail:n.fail.concat(u(i)),pass:n.pass,iou:n.iou,informant:n.informant})),isEmpty:()=>Boolean(!Array.isArray(i)||0===i.length),isPass:!1,isFail:!0,isIOU:!1,[t]:!1});n.Fail=u;const c=i=>i[t]?i:f({subject:a.Maybe.of(i),fail:u([]),pass:r([]),iou:e([]),informant:i=>i}),f=i=>({inquire:n=>{const o=n(i.subject.join());return o.isFail||o.isPass||o[t]?o.answer(i,n.name,f):r(o).answer(i,n.name,f)},inquireMap:(n,o)=>o.reduce((o,s)=>{const a=n(s)(o.join().subject.join());return a.isFail||a.isPass||a[t]?a.answer(o.join(),n.name,f):r(a).answer(i,n.name,f)},f({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:i.informant})),informant:n=>f({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:n}),inspect:()=>`Inquiry(${i.fail.inspect()} ${i.pass.inspect()} ${i.iou.inspect()}`,swap:()=>f({subject:i.subject,iou:i.iou,fail:u(i.pass.join()),pass:r(i.fail.join()),informant:i.informant}),unison:n=>f({subject:i.subject,iou:i.iou,fail:u(n(i.fail.join())),pass:r(n(i.pass.join())),informant:i.informant}),map:n=>c(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:()=>i,breakpoint:n=>i.fail.join().length?f(n(i)):f(i),milestone:n=>i.pass.join().length?f(n(i)):f(i),answer:(n,o,s)=>(n.informant([o,f(i)]),f({subject:n.subject,iou:n.iou,fail:n.fail.concat(i.fail),pass:n.pass.concat(i.pass),informant:n.informant})),conclude:(n,o)=>({subject:i.subject,iou:i.iou,fail:n(i.fail),pass:o(i.pass),informant:i.informant}),cleared:n=>i.fail.isEmpty()?n(i.pass):void 0,faulted:n=>i.fail.isEmpty()?void 0:n(i.fail),suffice:n=>i.pass.isEmpty()?void 0:n(i.pass),scratch:n=>i.pass.isEmpty()?n(i.fail):void 0,fork:(n,o)=>i.fail.join().length?n(i.fail):o(i.pass),fold:(n,o)=>i.pass.join().length?n(i.pass):o(i.fail),zip:n=>n(i.fail.join().concat(i.pass.join())),[t]:!0}),l={subject:c,of:i=>"subject"in i&&"fail"in i&&"pass"in i&&"iou"in i&&"informant"in i?f(i):(i=>(console.warn("Inquiry.of requires properties: subject, fail, pass, iou, informant. Converting to Inquiry.subject()."),c(i)))(i)};n.Inquiry=l;const p=i=>i[t]?i:h({subject:a.Maybe.of(i),fail:u([]),pass:r([]),iou:e([]),informant:i=>i}),j=i=>"subject"in i&&"fail"in i&&"pass"in i&&"iou"in i&&"informant"in i?h(i):(i=>(console.warn("InquiryP.of requires properties: subject, fail, pass, iou, informant. Converting to InquiryP.subject()."),p(i)))(i),m=i=>n=>n.reduce((i,n)=>n.answer(i,"(async fn)",h).join(),i),h=i=>({inquire:n=>{const o=n(i.subject.join());return o.then?h({subject:i.subject,fail:i.fail,pass:i.pass,iou:i.iou.concat(e([o])),informant:i.informant}):(o=>o.isFail||o.isPass||o[t]?o.answer(i,n.name,h):r(o).answer(i,n.name,h))(o)},inquireMap:(n,o)=>o.reduce((o,s)=>{const a=n(s)(o.join().subject.join());return a.then?h({subject:o.join().subject,fail:o.join().fail,pass:o.join().pass,iou:o.join().iou.concat(e([a])),informant:o.join().informant}):(s=>s.isFail||s.isPass||s[t]?s.answer(o.join(),n.name,h):r(s).answer(i,n.name,h))(a)},h({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:i.informant})),informant:n=>h({subject:i.subject,iou:i.iou,fail:i.fail,pass:i.pass,informant:n}),inspect:()=>`InquiryP(${i.fail.inspect()} ${i.pass.inspect()} ${i.iou.inspect()}`,swap:()=>h({subject:i.subject,iou:i.iou,fail:u(i.pass.join()),pass:r(i.fail.join()),informant:i.informant}),unison:n=>h({subject:i.subject,iou:i.iou,fail:u(n(i.fail.join())),pass:r(n(i.pass.join())),informant:i.informant}),map:n=>p(n(i)),ap:n=>n.map(i),chain:n=>n(i),join:()=>i,breakpoint:n=>i.fail.join().length?f(n(i)):h(i),milestone:n=>i.pass.join().length?f(n(i)):h(i),answer:(n,o,s)=>(n.informant([o,h(i)]),h({subject:n.subject,iou:n.iou,fail:n.fail.concat(i.fail),pass:n.pass.concat(i.pass),informant:n.informant})),conclude:(n,o)=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>({subject:i.subject,iou:i.iou,fail:n(i.fail),pass:o(i.pass),informant:i.informant}))}),cleared:n=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>i.fail.isEmpty()?n(i.pass):void 0).catch(i=>console.error("err",i))}),faulted:n=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>i.fail.isEmpty()?void 0:n(i.fail))}),suffice:n=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>i.pass.isEmpty()?void 0:n(i.pass)).catch(i=>console.error("err",i))}),scratch:n=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>i.pass.isEmpty()?n(i.fail):void 0)}),fork:(n,o)=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>i.fail.join().length?n(i.fail):o(i.pass))}),fold:(n,o)=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>i.pass.join().length?n(i.pass):o(i.fail))}),zip:n=>s(this,void 0,void 0,function*(){return Promise.all(i.iou.join()).then(m(i)).then(i=>i[t]?i.join():i).then(i=>n(i.fail.join().concat(i.pass.join())))}),await:(n=1/0)=>s(this,void 0,void 0,function*(){const o=new Promise((i,o)=>setTimeout(i,n,[u("Promise(s) have timed out")])),s=Promise.all(i.iou.join());return Promise.race([o,s]).then(m(i)).then(i=>i[t]?i.join():i).then(i=>j(i))}),[t]:!0}),d={subject:p,of:j};n.InquiryP=d}])});
//# sourceMappingURL=inquiry-monad.min.js.map