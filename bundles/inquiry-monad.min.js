!function(n,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("InquiryMonad",[],i):"object"==typeof exports?exports.InquiryMonad=i():n.InquiryMonad=i()}(window,function(){return function(n){var i={};function s(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return n[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=i,s.d=function(n,i,t){s.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:t})},s.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},s.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return s.d(i,"a",i),i},s.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},s.p="",s(s.s=1)}([function(n,i){const s=n=>({isJust:!0,isNothing:!1,inspect:i=>`Just(${n})`,map:i=>o.of(i(n)),ap:i=>i.map(n),chain:i=>i(n),join:i=>n,fork:(i,s)=>s(n),sequence:i=>n.map(o.of)}),t=n=>({isJust:!1,isNothing:!0,inspect:n=>"Nothing",map:n=>t(),ap:n=>t(),chain:n=>t(),join:n=>t(),fork:(n,i)=>n(),sequence:n=>n(t())}),o={of:n=>null===n||void 0===n?t():s(n)};n.exports={Maybe:o,Nothing:t,Just:s}},function(n,i,s){"use strict";var t=this&&this.__awaiter||function(n,i,s,t){return new(s||(s=Promise))(function(o,e){function a(n){try{u(t.next(n))}catch(n){e(n)}}function r(n){try{u(t.throw(n))}catch(n){e(n)}}function u(n){n.done?o(n.value):new s(function(i){i(n.value)}).then(a,r)}u((t=t.apply(n,i||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=s(0),e=()=>{},a=Symbol();i.$$inquirySymbol=a;const r=Symbol();i.$$questionsetSymbol=r;const u=Symbol(),c=Symbol(),f=n=>({map:i=>f(i(n)),chain:i=>i(n),ap:i=>i.map(n),inspect:()=>`IOU(${n})`,join:()=>n,concat:i=>i.chain(i=>f(n.concat(i))),head:()=>Array.isArray(n)&&n.length?n[0]:[],tail:()=>Array.isArray(n)&&n.length?n[n.length-1]:[],isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),[a]:!1,isPass:!1,isFail:!1,isIOU:!0});i.IOU=f;const l=n=>({map:i=>l(i(n)),chain:i=>i(n),fold:(i,s)=>i(n),fork:(i,s)=>s(n),head:()=>Array.isArray(n)&&n.length?n[0]:[],tail:()=>Array.isArray(n)&&n.length?n[n.length-1]:[],join:()=>n,inspect:()=>`Pass(${n})`,concat:i=>i.fold(i=>l(n.concat(i)),null),ap:i=>i.isPass?i.concat(l(n)):l(n),answer:(i,s="(anonymous)",t=b)=>(i.informant([s,l(n)]),t({subject:i.subject,fail:i.fail,iou:i.iou,pass:i.pass.concat(l(n)),informant:i.informant,questionset:i.questionset})),isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),isPass:!0,isFail:!1,isIOU:!1,[a]:!1});i.Pass=l;const p=n=>({map:i=>p(i(n)),chain:i=>i(n),fold:(i,s)=>s(n),fork:(i,s)=>i(n),head:()=>Array.isArray(n)&&n.length?n[0]:[],tail:()=>Array.isArray(n)&&n.length?n[n.length-1]:[],join:()=>n,inspect:()=>`Fail(${n})`,concat:i=>i.fork(i=>p(n.concat(i)),null),ap:i=>i.isPass?p(n):i.concat(p(n)),answer:(i,s="(anonymous)",t=b)=>(i.informant([s,p(n)]),t({subject:i.subject,fail:i.fail.concat(p(n)),pass:i.pass,iou:i.iou,informant:i.informant,questionset:i.questionset})),isEmpty:()=>Boolean(!Array.isArray(n)||0===n.length),isPass:!1,isFail:!0,isIOU:!1,[a]:!1});i.Fail=p;const j=n=>({map:i=>j(i(n)),chain:i=>i(n),ap:i=>i.map(n),inspect:()=>`Question(${n})`,join:()=>n,call:i=>n[1](i.join().subject.join()),extract:()=>n[1],[c]:!0}),m={of:n=>Array.isArray(n)?j(n):(n=>console.error("Question must be passed parameters that adhere to the documented type. Value that was passed:",n))(n)};i.Question=m;const h=n=>({map:i=>h(i(n)),chain:i=>i(n),ap:i=>i.map(n),inspect:()=>`Questionset(${n})`,join:()=>n,find:i=>o.Maybe.of(n.find(n=>RegExp(n[0]).test(i))).map(n=>n[1]).fork(()=>(console.warn("Question was not found: ",i),u),n=>n),[r]:!0}),d={of:n=>Array.isArray(n)?h(n):(n=>console.error("Questionset must be passed parameters that adhere to the documented type. Value that was passed:",n))(n)};i.Questionset=d;const y=n=>n[a]?n:b({subject:o.Maybe.of(n),fail:p([]),pass:l([]),iou:f([]),informant:n=>n,questionset:h([["",e]])}),b=n=>({inquire:i=>{const s=i[c]?i.extract():i,t="function"==typeof s,o=t?s:n.questionset.find(s),e=t?s.name:s,r="function"==typeof o?o(n.subject.join()):{};return r.isFail||r.isPass||r[a]?r.answer(n,e,b):(i=>(console.warn("inquire was passed a function that does not return Pass or Fail:",e),console.warn("response was:",i),b(n)))([r,e])},inquireMap:(i,s)=>s.reduce((s,t)=>{const o=i[c]?i.extract():i,e="function"==typeof o,r=e?o:n.questionset.find(o),u=e?o.name:o,f="function"==typeof r?r(t)(s.join().subject.join()):{};return f.isFail||f.isPass||f[a]?f.answer(s.join(),u,b):(n=>(console.warn("inquire was passed a function that does not return Pass or Fail:",u),console.warn("response was:",n),s))([f,u])},b({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:n.questionset})),using:i=>b({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:i}),informant:i=>b({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:i,questionset:n.questionset}),inspect:()=>`Inquiry(${n.fail.inspect()} ${n.pass.inspect()} ${n.iou.inspect()}`,swap:()=>b({subject:n.subject,iou:n.iou,fail:p(n.pass.join()),pass:l(n.fail.join()),informant:n.informant,questionset:n.questionset}),unison:i=>b({subject:n.subject,iou:n.iou,fail:p(i(n.fail.join())),pass:l(i(n.pass.join())),informant:n.informant,questionset:n.questionset}),map:i=>y(i(n)),ap:i=>i.map(n),chain:i=>i(n),join:()=>n,breakpoint:i=>n.fail.join().length?b(i(n)):b(n),milestone:i=>n.pass.join().length?b(i(n)):b(n),answer:(i,s,t)=>(i.informant([s,b(n)]),b({subject:i.subject,iou:i.iou,fail:i.fail.concat(n.fail),pass:i.pass.concat(n.pass),informant:i.informant,questionset:i.questionset})),conclude:(i,s)=>({subject:n.subject,iou:n.iou,fail:i(n.fail),pass:s(n.pass),informant:n.informant,questionset:n.questionset}),cleared:i=>n.fail.isEmpty()?i(n.pass):void 0,faulted:i=>n.fail.isEmpty()?void 0:i(n.fail),suffice:i=>n.pass.isEmpty()?void 0:i(n.pass),scratch:i=>n.pass.isEmpty()?i(n.fail):void 0,fork:(i,s)=>n.fail.join().length?i(n.fail):s(n.pass),fold:(i,s)=>n.pass.join().length?i(n.pass):s(n.fail),zip:i=>i(n.fail.join().concat(n.pass.join())),[a]:!0}),q={subject:y,of:n=>"subject"in n&&"fail"in n&&"pass"in n&&"iou"in n&&"informant"in n?b(n):(n=>(console.warn("Inquiry.of requires properties: subject, fail, pass, iou, informant. Converting to Inquiry.subject()."),y(n)))(n)};i.Inquiry=q;const w=n=>n[a]?n:g({subject:o.Maybe.of(n),fail:p([]),pass:l([]),iou:f([]),informant:n=>n,questionset:h([["",e]])}),v=n=>"subject"in n&&"fail"in n&&"pass"in n&&"iou"in n&&"informant"in n?g(n):(n=>(console.warn("InquiryP.of requires properties: subject, fail, pass, iou, informant. Converting to InquiryP.subject()."),w(n)))(n),P=n=>i=>i.reduce((n,i)=>i.answer(n,"(async fn)",g).join(),n),g=n=>({inquire:i=>{const s=i[c]?i.extract():i,t="function"==typeof s,o=t?s:n.questionset.find(s),e=t?s.name:s,r="function"==typeof o?o(n.subject.join()):{};return r.then?g({subject:n.subject,fail:n.fail,pass:n.pass,iou:n.iou.concat(f([r])),informant:n.informant,questionset:n.questionset}):(i=>i.isFail||i.isPass||i[a]?i.answer(n,e,g):(i=>(console.warn("inquire was passed a function that does not return Pass or Fail:",e),console.warn("response was:",i),b(n)))([r,e]))(r)},inquireMap:(i,s)=>s.reduce((s,t)=>{const o=i[c]?i.extract():i,e="function"==typeof o,r=e?o:n.questionset.find(o),u=e?o.name:o,p="function"==typeof r?r(t)(s.join().subject.join()):{};return p.then?g({subject:s.join().subject,fail:s.join().fail,pass:s.join().pass,iou:s.join().iou.concat(f([p])),informant:s.join().informant,questionset:s.join().questionset}):(i=>i.isFail||i.isPass||i[a]?i.answer(s.join(),u,g):l(i).answer(n,u,g))(p)},g({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:n.questionset})),using:i=>g({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:n.informant,questionset:i}),informant:i=>g({subject:n.subject,iou:n.iou,fail:n.fail,pass:n.pass,informant:i,questionset:n.questionset}),inspect:()=>`InquiryP(${n.fail.inspect()} ${n.pass.inspect()} ${n.iou.inspect()}`,swap:()=>g({subject:n.subject,iou:n.iou,fail:p(n.pass.join()),pass:l(n.fail.join()),informant:n.informant,questionset:n.questionset}),unison:i=>g({subject:n.subject,iou:n.iou,fail:p(i(n.fail.join())),pass:l(i(n.pass.join())),informant:n.informant,questionset:n.questionset}),map:i=>w(i(n)),ap:i=>i.map(n),chain:i=>i(n),join:()=>n,breakpoint:i=>n.fail.join().length?b(i(n)):g(n),milestone:i=>n.pass.join().length?b(i(n)):g(n),answer:(i,s,t)=>(i.informant([s,g(n)]),g({subject:i.subject,iou:i.iou,fail:i.fail.concat(n.fail),pass:i.pass.concat(n.pass),informant:i.informant,questionset:i.questionset})),conclude:(i,s)=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>({subject:n.subject,iou:n.iou,fail:i(n.fail),pass:s(n.pass),informant:n.informant,questionset:n.questionset}))}),cleared:i=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>n.fail.isEmpty()?i(n.pass):void 0).catch(n=>console.error("err",n))}),faulted:i=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>n.fail.isEmpty()?void 0:i(n.fail))}),suffice:i=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>n.pass.isEmpty()?void 0:i(n.pass)).catch(n=>console.error("err",n))}),scratch:i=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>n.pass.isEmpty()?i(n.fail):void 0)}),fork:(i,s)=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>n.fail.join().length?i(n.fail):s(n.pass))}),fold:(i,s)=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>n.pass.join().length?i(n.pass):s(n.fail))}),zip:i=>t(this,void 0,void 0,function*(){return Promise.all(n.iou.join()).then(P(n)).then(n=>n[a]?n.join():n).then(n=>i(n.fail.join().concat(n.pass.join())))}),await:(i=1/0)=>t(this,void 0,void 0,function*(){const s=new Promise((n,s)=>setTimeout(n,i,[p("Promise(s) have timed out")])),t=Promise.all(n.iou.join());return Promise.race([s,t]).then(P(n)).then(n=>n[a]?n.join():n).then(n=>v(n))}),[a]:!0}),A={subject:w,of:v};i.InquiryP=A}])});
//# sourceMappingURL=inquiry-monad.min.js.map